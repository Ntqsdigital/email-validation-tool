<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Email Validator Dashboard</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Segoe UI",sans-serif;
}

body{
  background:#f1f5f9;
  display:flex;
  min-height:100vh;
  overflow-x:hidden;
}

/* ---------- SIDEBAR ---------- */
.sidebar{
  width:230px;
  background:#0f172a;
  color:#fff;
  padding:20px;
  position:fixed;
  inset:0 auto 0 0;
  transform:translateX(-100%); /* CLOSED BY DEFAULT */
  transition:.35s ease;
  z-index:1000;
}
.sidebar.open{transform:translateX(0)}

.sidebar h2{
  text-align:center;
  color:#38bdf8;
  margin-bottom:30px;
}

.sidebar a{
  display:block;
  color:#cbd5e1;
  padding:12px;
  border-radius:6px;
  text-decoration:none;
  margin-bottom:8px;
}
.sidebar a:hover,
.sidebar a.active{
  background:#1e293b;
  color:#fff;
}

.close-btn{
  position:absolute;
  top:15px;
  right:15px;
  cursor:pointer;
}

/* ---------- MAIN ---------- */
.main{
  flex:1;
  padding:30px;
  transition:.35s ease;
}
.main.shift{
  margin-left:230px;
}

/* Content width control (THIS WAS MISSING) */
.container{
  max-width:1100px;
  margin:0 auto;
}

/* ---------- HEADER ---------- */
.header{
  background:#fff;
  padding:16px 24px;
  border-radius:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:25px;
}
.header-left{
  display:flex;
  align-items:center;
  gap:12px;
}
.menu-btn{
  font-size:22px;
  cursor:pointer;
}

/* ---------- CARD ---------- */
.card{
  background:#fff;
  padding:30px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.05);
}

input[type=file]{
  width:100%;
  margin-top:10px;
}

button{
  width:100%;
  margin-top:15px;
  padding:14px;
  background:#2563eb;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:15px;
  cursor:pointer;
}

/* ---------- RESULTS ---------- */
.results{
  display:flex;
  gap:20px;
  margin-top:25px;
}
.result-box{
  flex:1;
  padding:24px;
  border-radius:12px;
  text-align:center;
}
.valid{
  background:#ecfdf5;
  color:#047857;
}
.invalid{
  background:#fef2f2;
  color:#b91c1c;
}

.downloads{
  margin-top:20px;
}
.downloads a{
  display:block;
  margin-top:8px;
  color:#2563eb;
  text-decoration:none;
}

/* ---------- TABLE ---------- */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th,td{
  padding:12px;
  border-bottom:1px solid #e5e7eb;
}
th{
  background:#f8fafc;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <div class="close-btn" onclick="toggleSidebar()">✖</div>
  <h2>EmailValidator</h2>

  <a href="/dashboard" class="{{ 'active' if page=='dashboard' else '' }}">Dashboard</a>
  <a href="/history" class="{{ 'active' if page=='history' else '' }}">History</a>
  <a href="/billing" class="{{ 'active' if page=='billing' else '' }}">Billing</a>
  <a href="/settings" class="{{ 'active' if page=='settings' else '' }}">Settings</a>
</div>

<!-- MAIN -->
<div class="main" id="main">
  <div class="container">

    <div class="header">
      <div class="header-left">
        <span class="menu-btn" onclick="toggleSidebar()">☰</span>
        <h3>{{ page|capitalize }}</h3>
      </div>
      <span>Free Plan</span>
    </div>

    <div class="card">

      {% if page == "dashboard" %}
        <h4>Upload CSV / Excel</h4>

        <form action="/validate" method="post" enctype="multipart/form-data">
          <input type="file" name="file" required>
          <button type="submit">Validate Emails</button>
        </form>

        {% if show_results %}
        <div class="results">
          <div class="result-box valid">
            <h2>{{ valid_count }}</h2>
            <p>Valid Emails</p>
          </div>
          <div class="result-box invalid">
            <h2>{{ invalid_count }}</h2>
            <p>Invalid Emails</p>
          </div>
        </div>

        <div class="downloads">
          <a href="/download/valid">⬇ Download Valid Emails</a>
          <a href="/download/invalid">⬇ Download Invalid Emails</a>
        </div>
        {% endif %}

      {% elif page == "history" %}
        <h4>Validation History</h4>

        <table>
          <tr>
            <th>File</th>
            <th>Total</th>
            <th>Valid</th>
            <th>Invalid</th>
            <th>Date</th>
          </tr>
          {% for h in history %}
          <tr>
            <td>{{ h[0] }}</td>
            <td>{{ h[1] }}</td>
            <td style="color:green">{{ h[2] }}</td>
            <td style="color:red">{{ h[3] }}</td>
            <td>{{ h[4] }}</td>
          </tr>
          {% endfor %}
        </table>

      {% elif page == "billing" %}
        <h4>Billing & Plans</h4>
        <p>Free Plan</p>

      {% elif page == "settings" %}
        <h4>Account Settings</h4>
        <p><b>Email:</b> {{ user_email }}</p>
        <p><b>Plan:</b> Free</p>
        <a href="/logout" style="color:#dc2626;text-decoration:none;">Logout</a>
      {% endif %}

    </div>

  </div>
</div>

<script>
function toggleSidebar(){
  sidebar.classList.toggle("open");
  main.classList.toggle("shift");
}
</script>

</body>
</html>
